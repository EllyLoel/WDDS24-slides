@media (prefers-color-scheme: dark) {
	.astro-code {
		&,
		& span {
			color: var(--shiki-dark) !important;
		}
		background-color: color-mix(
			in oklch,
			var(--shiki-dark-bg),
			white 5%
		) !important;
		/* Optional, if you also want font styles */
		font-style: var(--shiki-dark-font-style) !important;
		font-weight: var(--shiki-dark-font-weight) !important;
		text-decoration: var(--shiki-dark-text-decoration) !important;
	}
}

pre {
	line-height: var(--font-lineheight-3);
	margin-block: var(--size-3);
	text-align: start;
	border-radius: var(--radius-3);
	padding-block: calc(var(--size-8) + var(--size-2)) var(--size-3);
	--_pre-inline-padding: var(--size-5);
	padding-inline: var(--_pre-inline-padding);
	box-shadow: var(--shadow-3);
	max-inline-size: max(var(--size-content-1), 95vw);
	background: linear-gradient(to bottom, #0003 0 0, 2.5rem, #0000 0 0),
		radial-gradient(
			circle at 2rem 1.25rem,
			var(--gray-10) 0 0,
			0.5rem,
			#0000 0 0
		),
		radial-gradient(
			circle at 3.5rem 1.25rem,
			var(--gray-9) 0 0,
			0.5rem,
			#0000 0 0
		),
		radial-gradient(
			circle at 5rem 1.25rem,
			var(--gray-8) 0 0,
			0.5rem,
			#0000 0 0
		),
		conic-gradient(from 25deg at 35% 75%, #ffffff09, 85%, #fff0);
}

code {
	box-decoration-break: clone;
	tab-size: 4;
	display: inline-block;
	inline-size: 100%;

	& :is(del, ins) {
		display: inline-block;
		inline-size: calc(100% + (var(--_pre-inline-padding) * 2));
		padding-inline: var(--_pre-inline-padding);
		margin-inline: calc(var(--_pre-inline-padding) * -1);
	}

	& del {
		background: light-dark(
			var(--red-1),
			color-mix(in oklch, var(--red-12), transparent 65%)
		);
		text-decoration: none;
		color: light-dark(var(--red-8), var(--red-3));

		&::before {
			content: 'âˆ’ ';
		}
	}

	& ins {
		background: light-dark(
			var(--green-1),
			color-mix(in oklch, var(--green-12), transparent 65%)
		);
		text-decoration: none;
		color: light-dark(var(--green-8), var(--green-3));

		&::before {
			content: '+ ';
		}
	}
}
